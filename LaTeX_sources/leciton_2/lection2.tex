% !TeX spellcheck = russian_english
% !TeX encoding = UTF-8
\documentclass[a4paper, fleqn]{article}

\usepackage{indentfirst} % Красная строка
\usepackage[T2A]{fontenc} % Поддержка русских букв
\usepackage[utf8]{inputenc} % Кодировка utf8
\usepackage[russian]{babel} % руссификация
\usepackage{amssymb} % дополнительные символы
\usepackage{textcomp} % дополнительные текстовые символы
\usepackage{amsmath} % матрицы
\usepackage{pdfpages}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{listings}

% \input{listings-python.prf}
%\ifx\pdfoutput\undefined
%\usepackage{graphicx}
%\else
%\usepackage[pdftex]{graphicx}
%\fi

\textwidth = 16 cm
\oddsidemargin= 0 cm
\evensidemargin= 1 cm


% \abovedisplayskip = 0 pt %.2\abovedisplayskip
% \belowdisplayskip = .2\belowdisplayskip
% \abovedisplayshortskip=.2\abovedisplayshortskip
% \belowdisplayshortskip=.2\belowdisplayshortskip
% \topsep= 0 pt

\setlength{\mathindent}{1.2 cm}
% \setlength{\topsep}{0 pt}
% \setlength{\abovedisplayskip}{0 pt}
\pgfplotsset{major grid style={very thick}}
\pgfplotsset{myaxis/.style = {title=Мой рисунок,
	minor tick num = 4,
	xlabel={$x$,\,м},
	ylabel={$y$,\,A},
	grid={both},
	axis x line=middle,
	axis y line=middle,
	scaled ticks=true,
	legend pos = outer north east}}
%\pgfplotsset{regression/.style = {black, solid, mark=none, y={create col/linear regression={y}}}}

% \clubpenalty = 5000 % запрет висячих строк
% \widowpenalty = 5000
\binoppenalty=10000
\relpenalty=10000

% собственные команды и окружения

% \newcommand*{\spt}[2][ени]{простран\-ств#2-врем#1}
% \newcommand*{\ks}[1]{$K$-систем#1} % учитывать пробел!
% \newcommand*{\kss}[1]{$K'$-систем#1} % учитывать пробел!
\newenvironment{example}[1][]{\medskip \noindent \textbf{Пример. #1}\par \nopagebreak}{\medskip \par} % окружение-"пример"
\newcommand*{\py}{Python}

\lstset{language=Python, tabsize=4, language=Python}


\title{Лекция \textnumero\,2}
	% {\huge \vspace{3 cm}}}

\author{Т.\,Ф. Хирьянов}

\date{}

\begin{document}
	\maketitle
	\subsection*{Преимущества и недостатки языка программирования Python}
		Достоинства:
		\begin{enumerate}
			\item \emph{Современность.}\\
			Встроенно очень много удобных методик программирования.
			
			\item \emph{Универсальность.}\\			
			На этом языке можно программировать любое приложение от скрипта операционной системы до игры на мобильном телефоне.
			
			\item \emph{Богатая стандартная библиотека.}\\			
			В ней предусмотренно огромное количество функций, включая работу с сетями и математическими выражениями.
			
			\item \emph{Кроссплатформенность}\\			
			Интерпретатор Python может работать в любой операционной системе, на компьютерах с разной архитектурой.
			
			\item \emph{Интерпретируемость}\\			
			Одним из следствий интерпретируемости является то, что в переменную можно сохранять данные разных форматов. 
			\begin{lstlisting}
			x = 123		
			x = "python" 	
			\end{lstlisting}
			Так 123 -- это целое число, а python -- строка.
		\end{enumerate}
		% указать недостатки
		
	\subsection* {Ссылочная модель данных в Python. Динамическая~типизация.}
	
		В Python нет операции присваивания. Запись
		\[x = 123\]
		означает, что объект 123 связывается с ссылкой x. А сама операция является связыванием объекта и ссылки.
		Кусок кода
		\[x = int(x)\]
		будет выполняться следующим образом. Сначала выполнится выражение стоящее справа, затем порожденный им объект, сохранится в некоторой области памяти, вообще говоря, отличающейся от того участка, на который указывал $x$ ранее. В заключении ссылка $x$ связывается с этим новым объектом.
		
		Для того чтобы справиться с утечкой памяти старый объект удаляется сборщиком мусора, если на него больше нет ссылок.
		
		При таком подходе тип объекта строго определен, но появляется у ссылки только в момент выполнения программы.
		% СНОСКА: В дальнейшем под переменными будут подразумеваться ссылки.
		
		
		
	\subsection*{Отличия языков программирования Python\,2 и Python\,3}
	
		При развитии и улучшении языков программирования часто бывает необходимо кардинально изменить концепции привычных вещей. При таком переходе теряется совместимость старых и новых версий языка. Так произошло с Python2 и Python3. 
		
		\begin{example}
			
			Функция input() в этих версиях языка ведет себя по разному. Так в Python2 выражение
			\[x = input('5 + 3')\]
			вычислит значение суммы и сохранит его в $x$.
			В Python3 это же выражение выведет на экран\\
			\[5 + 3\]
			а затем считает данные с клавиатуры и сохранит их в $x$ в виде строки.
			Это бывает очень удобно. Например, можно вывести своеобразное приглашение: "Введите $x$". 
			
		\end{example}
		
	\subsection*{Обмен двух переменных значениями}
	
	% Как правильно программировать, ссылки на статьи.
	% Марк Лутц <<Карманный справочник>>
	% stepic.org
	% cheakio.org - решение задач в игровой форме
	% pythontutor.ru
	% Саммерфилд 2 книги
	% Марк Пилгрим <<Drive into the Python>>
	
	Допустим, есть две переменные 
	\begin{lstlisting}
	x = 3
	x = 7
	\end{lstlisting}
	\[x=3\] 
	\[x=7\]
	и необходимо произвести обмен их значениями. Эта задача однако не так тривиальна, как кажется. Например, такое решение 
	\begin{lstlisting}
	x = y
	y = x
	\end{lstlisting}
	является неверным, так как после выполнения $x=y$ теряется ссылка на объект <<3>> и $х$ начинает указывать на <<7>>.
	
	В решении данной задачи удобно воспользоваться аналогией. Так, чтобы поменять содержимое стакана с водой и кружки с молоком друг между другом, можно воспользоваться третьим сосудом.
	
	Этот алгоритм можно реализовать следующим образом.
	\begin{lstlisting}
	tmp = x
	x = y
	y = x
	\end{lstlisting}
	Теперь нет потери значения $x$, так как оно предварительно сохранено в переменную $tmp$. Это классический пример обмена значениями переменных через третью.
	% СНОСКА алгоритм с двумя временными переменными
	
	\subsection*{Кортеж переменных}
	
	В языке \py существует элегантное решение этой задачи, основанное на использовании специальной структуры данных \emph{кортежа переменных}.
	
	Кортеж синтаксически представляет собой набор данных или переменных разделенных запятыми. Обычно он окружается круглыми скобками. Например,
	\begin{lstlisting}
	(1,2,3)
	\end{lstlisting}
	(1, 2, 3)
	является кортежем данных, а
	\begin{lstlisting}
	(x, y, z)
	\end{lstlisting}
	кортежем переменных.
	
	Такая структура имеет множество удобных способов применения. Так можно присвоить кортежу переменных кортеж данных.
	\begin{lstlisting}
	(x, y, z) = (1, 2, 3)
	\end{lstlisting}
	
	% СНОСКА Бывает удобно сразу нескольким переменным присвоить одно значение. Для этого в языках \py и Си есть одна удобная конструкция.
	%\[x=y=z=0\]
	Или обменять значениями две переменные более наглядным способом.
	\begin{lstlisting}
	(x, y) = (y, x)
	\end{lstlisting}
	
	Более того, используя кортежи есть возможность организовать циклический сдвиг нескольких переменных.
	\begin{lstlisting}
	(x, y, z) = (z, x, y)
	\end{lstlisting}
	
	
	\subsection*{Арифметические операции}
	
	Большинство арифметических операций синтаксически реализованы в \py нативным образом, как во многих других языках программирования. Например, операции сложения, умножения и деления выглядят следующим образом.
	\begin{lstlisting}
	x + y
	x * y
	x / y
	\end{lstlisting}
	
	Однако существуют некоторые особенности. Первая из них связанна с операцией целочисленного деления div. Во многих языках программирования она будет выполнена следующим образом.
	\begin{lstlisting}
	-17 div 10 = -1
	\end{lstlisting}
	
	% лучше листинг
	Однако в соответствии с очевидным уравнением
	\begin{lstlisting}
	x * 10 + r = -17
	\end{lstlisting}
	% ссылка на уравнение
	это приведет к тому, что соответствующий остаток будет отрицательным. Это противоречит принятому в математике положению, что остаток от деления по модулю~--- неотрицательное число.
	% СНОСКА Кольца вычетов.
	% Рисунок оси 0039 11:20
	Для решения это проблемы в приведенном выше уравнении можно уменьшить $x$ на единицу. Тогда целая часть и остаток от деления будут следующими.
	\begin{lstlisting}
	-17 div 10 = -2
	-17 % 10 = 3
	\end{lstlisting}
	
	\subsection*{Цикл с предусловием}
	
	% 0039 13:25
	Для организации циклического выполнения каких-либо действий в \py предусмотрена конструкция цикла с предусловием. Она начинается с зарезервированного слова \emph{while}. Затем записывается условие, при котором будут выполняться действия, записанные в \emph{тело цикла}. После условия необходимо поставить двоеточие и перейти на новую строчку.
	Перед каждой следующей строкой тела цикла делается отступ.
	% СНОСКА Рекомендовано делать отступ, равный четырем пробелам относительно положения слова while.
	Для того чтобы выйти из тела цикла необходимо и достаточно перейти на новую строчку и убрать относительный отступ.
	
	При однократном выполнении  или \emph{итерации} цикла в начале будет проверено условие и если оно выполнено, то начнется последовательное исполнение команд тела цикла и переход к новой итерации по их окончании. 
	
	Существуют также \emph{функции управления циклом}. Например, с помощью функции \emph{break} можно преждевременно выйти из цикла. Как правило это бывает нужно, в случаях проверки дополнительного условия в момент выполнения итерации. Условная конструкция оформляется аналогичным образом: после зарезервированного слова \emph{if} следует само условие, оканчивающееся двоеточием. В случае выполнения условия будут выполнены команды, записанные ниже через отступ.
	% СНОСКА Подробнее об условных конструкциях смотри в лекции \textnumero\,(номер лекции).
	
	Также бывает необходимо при выполнении какого-то условия завершить выполнение текущей итерации и перейти к следующей.
	Для этого используется функция \emph{continue}.
	
	В качестве примера оформления можно рассмотреть псевдокод, реализующий бег человека на стадионе.
	\begin{lstlisting}
	while sunny:
		if trouble:
			break
		run 100 metres
		if difficult:
			continue
		run extremelly last 100 metres	
	\end{lstlisting}
	
	При таком алгоритме действий человек будет бегать, пока на улице стоит хорошая погода. В случае форс-мажора, например, травмы, бег прекращается. Но если ничего не произошло, то спортсмен будет бежать трусцой 100 метров. Затем, если он устал, снова проверит погоду, оценит, все ли в порядке, пробежит еще 100 метров трусцой, т.\,е. перейдет к следующей итерации цикла. Если же человек полон сил, то последние 100 метров круга он пробежит так быстро, как сможет.
	
	Примером настоящего кода может служить следующая программа.
	\begin{lstlisting}
	x = int(input())
	while x < 100:
		s += x
		if x % 7 == 0:
			break
		x += 5
	else: 
		print(x)
	print(s)
	\end{lstlisting}
	% Вычислительная математика
	
	Она выполняет подсчет суммы арифметической прогрессии с разностью, равной 5,  начиная с введенного пользователем числа (которое приводится к целочисленному типу). Подсчет суммы производится пока члены прогрессии меньше 100. Строка
	\begin{lstlisting}
	s += x
	\end{lstlisting}
	
	означает, что значение переменной $s$  увеличивается на $x$. При этом если текущий просуммированный член прогрессии делится нацело на $7$ (т.е. его остаток при делении на $7$ равен $0$), то осуществляется выход из цикла. Для сравнения равенства двух чисел используется оператор $==$.
	% ? это точно называется оператором?
	В завершении программы на экран выводится значение суммы.
	
	Для того чтобы по окончании работы цикла было понятно, завершился ли он нормально или преждевременно, существует специальное дополнение к конструкции цикла. После тела на уроне while записывается else и ставится двоеточие. Инструкции записанные ниже через отступ будут выполнены только когда будет нарушено условие в заголовке цикла, т.е. когда последний завершится нормально. В приведенном примере на экран выведется последнее значение $x$. Функция break осуществляет полный выход из цикла, а значит, <<команды else>> будут также не выполнены.
	
	% СНОСКА если в конце сторки ставится двоеточие, то следующая строка обязательно начинается с отступа.
	
	В условной конструкции также есть дополнение else. Синтаксически она выглядит следующим образом.
	\begin{lstlisting}
	
	\end{lstlisting}
	if условие:\\
	\qquad действие А\\
	else: \\
	\qquad действие В\\
	
	% pass
	
	\subsection*{Генерация~последовательностей.}
	
	
	Генерация арифметической прогрессии от нуля до вводимого пользователем $N$, не включая последнего, с разностью, равной $1$. 
	\begin{lstlisting}
	N = int(input())
	i = 0
	while i < N:
		print(i)
		i += 1
	\end{lstlisting}
	
	Удобно использовать понятие \emph{инварианта цикла}. Это некоторое утверждение, которое является верным в начале каждой итерации цикла. В данном примере оно может быть следующим: <<В момент начала каждой итерации распечатаны все целые числа от $0$ до $N$, не включая последнее>>. 
	
	\subsection*{Вложенные циклы.}
	
	Задача вывода на экран показаний часов с 5 до 12, когда минуты равны 10, 20, 30, 40 и 50.
	\begin{lstlisting}
	hour = 5
	while hour <= 12:
		minute = 10
		while minute <= 50:
			print(hour, minute, sep=':')
			minute += 10
		hour += 1
	\end{lstlisting}
	
	Чтобы не прописывать распечатку пяти показаний для каждого часа, логично использовать еще один, вложенный, цикл, в котором итератор будет пробегаться по значениям минут.
	
	Стоит отметить, что функция break осуществляет выход только из цикла, в чьем теле она записана, т.е. с ее помощью нельзя выйти из вложенного цикла.
	
	
	\subsection*{Функции}
	
	Для того чтобы программа была понятной любому программисту, в том числе и ее автору некоторое время спустя, важно давать функциям и переменным содержательные названия. Например, нельзя понять вне контекста результат работы функции f(a,~b). Однако можно ожидать, что функция max(a,~b) возвратит максимальное из двух чисел $a$ и $b$.
	
	Рассмотрим реализацию последней в качестве примера синтаксиса.
	\begin{lstlisting}
	def max(a, b):
		if a > b:
			return a
		return b
	\end{lstlisting}
	
	Заголовок объявления функции начинается с зарезервированного слова \emph{def}. Ввиду того, что \py является интерпретируемым языком, типы данных аргументов функции не указываются, так как они определяются только в момент вызова функции. Поэтому приведенная программа будет одинаково хорошо работать как с целыми, так и с вещественными числами.
	
	В данном примере не используется конструкция с else, так как функция return возвращает результат работы функции (значение переменной $a$ или $b$) и завершает ее выполнение.
	Поэтому выполнится либо return a, либо return b.
	
	Также функция имеет возможность возвращать кортеж. Примером может служить функция, осуществляющая обмен двух переменных значениями.
	
	\begin{lstlisting}
		def swap(x,y):
			return y,x
	\end{lstlisting}
	

	
\end{document}